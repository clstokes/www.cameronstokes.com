--- 
layout: post
title: Migrating my email to Google Apps
categories: Tech
---
I've been running my own email server for several years now and the biggest issues have certainly been dealing with spam.  For the longest time I just put up with it and filtered manually.  Then about 2 years ago I put in place an anti-spam gateway using <a href="http://openbsd.org/">OpenBSD</a> and the excellent guide over at <a href="http://flakshack.com/anti-spam/wiki/index.php">flakshak.com</a>.  This worked great.  I was able to configure the anti-spam settings using <a href="http://spamassassin.apache.org/">SpamAssassin</a> and tweak to my heart's delight.

The biggest issue with this was managing the box(es) running the anti-spam software.  We (I was running a hosting company at the time with two other people.) ended up filling up the various disk partitions with either massive email log files or SpamAssassin data as we added more and more users to the server.  If we didn't keep an eye on it, the disk would fill up, and the server would then die in strange ways.  (Fortunately, we were running redundant OpenBSD servers with <a href="http://openbsd.org/faq/pf/index.html">pf</a> and <a href="http://openbsd.org/faq/pf/carp.html">carp</a> so we often didn't notice the server had died until we tried to login to it later.)  Anyway, after shutting down the anti-spam servers and moving my personal server I had to figure out another way to deal with the spam.

I ended up using the same email server software as before and setup some forwarding rules following <a href="http://blog.mboffin.com/blogpost.aspx?id=1636">Using Gmail as a Spam Filter</a>.  This worked great as well but sometimes caused a delay in getting emails and given my setup I had to reconcile email in both gmail and my mail server.  That is, marking items as read in my email server didn't mark them as read in gmail as well, so I had to do it in both places...not a big issue but mildly annoying.

Fast forward a year or so and I've now moved my email hosting to <a href="http://www.google.com/a/help/intl/en/index.html">Google Apps</a> entirely.  The process was a piece of cake though not as fast as I would have liked.  After signing up, you have to prove that you own the domain you're wanting them to host, either by uploading an html document that they specify or creating a sub-domain on your DNS server that they specify.  This process seems to take about 30 minutes to an hour for them to verify though they claim it can take 24-48 hours.  After this you have to enable E-mail for your domain which again takes about 30 minuts to an hour as they enable their email servers to accept email for your domain.  Once this is done you just need to change your DNS settings so that your MX records point to Google's servers.  The process takes a couple hours, but it's mostly waiting.

I left the email server running on my personal server for the next several days so that I could still get email while the DNS changes propagated out to everyone.  About 7 days later I was still getting email to it, but when I checked who was sending it was mostly spam and the number of emails had dropped considerably.  I decided to go ahead and shut it down and not worry about any other email coming in.

All in all, the setup process was painless.  I no longer have to worry about running my own email server or dealing with anti-spam software.  It's no wonder why Google provides this, they now gets tons of information about me as they offer ads based on the content of my email.  I may be paranoid, I don't like Google knowing so much about me (certainly a topic for a future post), but they've made their services so enticing that it's difficult to justify running my own server or paying someone else to do it.
